# 프롬프트 템플릿 구조 분석

**생성일**: 2025-10-11
**전체 템플릿**: 41개 (활성화: 41개)

---

## 📊 카테고리별 분포

| 카테고리 | 개수 | 파라미터형 | 고정형 |
|---------|------|-----------|--------|
| 🎭 3D 피규어 | 5개 | 0개 | 5개 |
| 📸 포트레이트 스타일링 | 12개 | 0개 | 12개 |
| ✂️ 이미지 편집 | 16개 | 4개 | 12개 |
| 🎮 게임/애니메이션 | 2개 | 0개 | 2개 |
| 🎨 크리에이티브 변환 | 6개 | 2개 | 4개 |

**총계**: 파라미터형 6개 (14.6%), 고정형 35개 (85.4%)

---

## 🔧 파라미터형 템플릿 (6개)

파라미터형 템플릿은 사용자에게 추가 옵션 선택을 요구하는 템플릿입니다.

### 1. 슈퍼히어로 9부작 스토리 (9part_superhero_story)
- **카테고리**: 크리에이티브 변환
- **우선순위**: 85
- **이미지**: 2-2장 (얼굴 필요: O)
- **파라미터**: 3개
  1. **스토리 테마** (story_theme) - 필수
     - 6개 옵션: 슈퍼히어로 탄생, 악당과의 대결, 정체 공개, 우정의 시험, 시간여행 모험, 세계 구출
  2. **아트 스타일** (art_style) - 필수
     - 4개 옵션: 코믹북 스타일, 영화 같은, 애니메이션, 사실적
  3. **감정 전개** (mood_progression) - 선택
     - 3개 옵션: 희망에서 승리로, 어둠에서 빛으로, 미스터리 해결

### 2. 연필 스케치 변환 (_pencil_sketch_transformation)
- **카테고리**: 크리에이티브 변환
- **우선순위**: 75
- **이미지**: 1-1장 (얼굴 필요: X)
- **파라미터**: 2개
  1. **스케치 스타일** (sketch_style) - 선택
     - 6개 옵션: 연한 스케치, 세밀한 스케치, 목탄 드로잉, 크로스 해칭, 러프 스케치, 연필 드로잉
  2. **종이 질감** (paper_texture) - 선택
     - 4개 옵션: 매끄러운 종이, 질감 있는 종이, 캔버스, 오래된 종이

### 3. 배경 변경 (background_replace)
- **카테고리**: 이미지 편집
- **우선순위**: 90
- **이미지**: 1-1장 (얼굴 필요: X)
- **파라미터**: 1개
  1. **배경 스타일** (background_style) - 필수
     - 6개 옵션: 석양 해변, 도심 야경, 우주 은하, 판타지 숲, 화이트 스튜디오, 미니멀 그레이

### 4. 의상 스타일링 (outfit_styling)
- **카테고리**: 이미지 편집
- **우선순위**: 88
- **이미지**: 1-1장 (얼굴 필요: O)
- **파라미터**: 1개
  1. **의상 스타일** (outfit_style) - 필수
     - 6개 옵션: 비즈니스 정장, 캐주얼 스트릿, 우아한 드레스, 스포츠웨어, 한복, 빈티지 복고

### 5. 의상 스타일 변경 (outfit_swap)
- **카테고리**: 이미지 편집
- **우선순위**: 87
- **이미지**: 1-1장 (얼굴 필요: O)
- **파라미터**: 1개
  1. **의상 스타일** (outfit_style) - 필수
     - 6개 옵션: 정장 (비즈니스), 모던 캐주얼, 이브닝 드레스, 스포츠웨어, 한복 (전통의상), 빈티지 스타일

### 6. 표정 변경 (expression_change)
- **카테고리**: 이미지 편집
- **우선순위**: 85
- **이미지**: 1-1장 (얼굴 필요: O)
- **파라미터**: 1개
  1. **표정 선택** (expression_type) - 필수
     - 5개 옵션: 밝게 웃는, 진지한, 신비로운, 자신감 있는, 장난스러운

---

## 📝 고정형 템플릿 (35개)

고정형 템플릿은 추가 옵션 선택 없이 바로 실행되는 템플릿입니다.

### 🎭 3D 피규어 (5개)
1. **🎭 피규어 만들기** (figurine_commercial) - 우선순위: 95
2. **🎮 Funko Pop 피규어** (funko_pop) - 우선순위: 90
3. **🧸 손뜨개 인형** (yarn_doll) - 우선순위: 85
4. **🦸 히어로 봉제인형** (plush_hero) - 우선순위: 80
5. **😊 이모지 스티커 세트** (emoji_stickers) - 우선순위: 75

### 📸 포트레이트 스타일링 (12개)
1. **🌟 레드카펫 스타일** (red_carpet) - 우선순위: 92
2. **🌃 파리의 밤 인물사진** (night_portrait_paris) - 우선순위: 88
3. **📷 프로페셔널 흑백** (bw_professional) - 우선순위: 86
4. **⚫ 드라마틱 흑백사진** (dramatic_bw) - 우선순위: 85
5. **🎩 시네마틱 수트 스타일** (cinematic_suit) - 우선순위: 83
6. **🌅 골든아워 빈티지** (golden_vintage) - 우선순위: 82
7. **☀️ 창가의 부드러운 빛** (soft_window_light) - 우선순위: 79
8. **🎬 70년대 헐리우드 스타** (hollywood_70s) - 우선순위: 78
9. **🌹 로맨틱 로즈 스타일** (rose_romantic) - 우선순위: 76
10. **🟠 오렌지 패션 화보** (orange_fashion) - 우선순위: 74
11. **🎷 레트로 라운지 스타일** (retro_lounge) - 우선순위: 73
12. **🎭 우아한 전통의상 스타일** (elegant_saree) - 우선순위: 70

### ✂️ 이미지 편집 (12개 고정형)
1. **🎨 다중 이미지 합성** (multi_merge) - 우선순위: 91
2. **✨ 화질 개선** (quality_enhance) - 우선순위: 89
3. **➖ 사물 제거** (object_remove) - 우선순위: 84
4. **➕ 사물 추가** (object_add) - 우선순위: 71
5. **👕 의상만 변경** (clothing_change) - 우선순위: 69
6. **💇 헤어스타일 변경** (hairstyle_change) - 우선순위: 67
7. **🍂 계절 변경** (season_change) - 우선순위: 66
8. **💪 근육질 변신** (muscular_transform) - 우선순위: 65
9. **🔧 사진 복원** (photo_restore) - 우선순위: 64
10. **📐 카메라 앵글 변경** (camera_angle) - 우선순위: 60
11. **👗 의상 추출** (clothing_extract) - 우선순위: 58
12. **✏️ 텍스트 편집** (text_edit) - 우선순위: 55

### 🎮 게임/애니메이션 (2개)
1. **🎮 리듬게임 캐릭터** (rhythm_game) - 우선순위: 72
2. **👾 16비트 픽셀아트** (pixel_16bit) - 우선순위: 68

### 🎨 크리에이티브 변환 (4개 고정형)
1. **📸 9장 앨범 생성** (album_9_photos) - 우선순위: 77
2. **📷 9장 스티커 사진** (photo_strip_9) - 우선순위: 63
3. **👨‍👩‍👧‍👦 폴라로이드 가족** (polaroid_family) - 우선순위: 62
4. **💑 폴라로이드 커플** (polaroid_couple) - 우선순위: 61

---

## 🔍 구조 분석 결과

### ✅ 정상 구조
- **전체 41개 템플릿 모두 활성화 상태**
- **6개 파라미터형 템플릿 모두 파라미터 및 옵션 정상 등록**
- 데이터베이스 스키마와 실제 데이터가 일치

### 📋 파라미터 구조
```
prompt_templates (template_key)
  └─ template_parameters (parameter_key)
      └─ template_parameter_options (option_key)
```

### 🎯 파라미터 타입
- **select**: 드롭다운 선택 (현재 모두 select 타입)
- **text**: 자유 입력 (미사용)
- **color**: 색상 선택 (미사용)

### 📊 파라미터 분포
- **1개 파라미터**: 4개 템플릿 (배경 변경, 의상 스타일링, 의상 스타일 변경, 표정 변경)
- **2개 파라미터**: 1개 템플릿 (연필 스케치 변환)
- **3개 파라미터**: 1개 템플릿 (슈퍼히어로 9부작 스토리)

### 💡 개선 제안
1. **필수/선택 구분 명확화**: 현재 is_required 플래그가 있지만 UI에서 명확히 표시 필요
2. **파라미터 순서 보장**: display_order 활용하여 일관된 순서로 표시
3. **옵션 수 최적화**: 5-6개 옵션이 가장 이상적 (현재 3-6개 분포)
4. **미리보기 이미지**: 옵션별 미리보기 이미지 추가 고려
5. **멀티 파라미터 UX**: 3개 이상 파라미터일 때 단계별 선택 UX 개선 필요

---

## 🔄 사용자 플로우

### 고정형 템플릿
```
사진 업로드 → 템플릿 선택 → 즉시 처리 → 결과 표시
```

### 파라미터형 템플릿
```
사진 업로드 → 템플릿 선택 → 파라미터 선택 화면
  → 옵션 1 선택 (필수)
  → 옵션 2 선택 (선택/필수)
  → ...
  → 처리 시작 → 결과 표시
```

---

## 📌 구현 상태 체크리스트

- [x] 데이터베이스 스키마 (prompt_templates, template_parameters, template_parameter_options)
- [x] 템플릿 조회 (카테고리별, 전체)
- [x] 파라미터 조회 (템플릿별)
- [x] 옵션 조회 (파라미터별)
- [x] 파라미터 선택 UI (InlineKeyboard)
- [x] 파라미터 콜백 처리
- [ ] 필수/선택 파라미터 명확한 UI 표시
- [ ] 멀티 파라미터 단계별 선택 UX
- [ ] 파라미터 검증 및 에러 처리
- [ ] 파라미터 선택 취소/되돌리기

---

**마지막 업데이트**: 2025-10-11
**다음 리뷰**: 파라미터 UX 개선 후
